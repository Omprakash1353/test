<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Browser Data Collection - Educational Demo</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        margin: 0;
        padding: 0;
        background-color: #f0f0f0;
        color: #333;
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
      }

      header {
        background-color: #e74c3c;
        color: white;
        padding: 20px;
        text-align: center;
        border-radius: 5px 5px 0 0;
      }

      .warning-banner {
        background-color: #ffeb3b;
        padding: 10px 20px;
        margin-bottom: 20px;
        border-left: 4px solid #f57f17;
      }

      .content-box {
        background-color: white;
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }

      h1,
      h2,
      h3 {
        margin-top: 0;
      }

      .data-section {
        margin-bottom: 30px;
      }

      .data-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
      }

      .data-table th {
        background-color: #f5f5f5;
        text-align: left;
        padding: 10px;
        border-bottom: 2px solid #ddd;
      }

      .data-table td {
        padding: 10px;
        border-bottom: 1px solid #ddd;
      }

      .data-table tr:nth-child(even) {
        background-color: #f9f9f9;
      }

      .action-button {
        background-color: #2196f3;
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        margin-right: 10px;
      }

      .action-button:hover {
        background-color: #0b7dda;
      }

      .hidden {
        display: none;
      }

      .highlight {
        color: #e74c3c;
        font-weight: bold;
      }

      #statusMessages {
        padding: 10px;
        margin-top: 10px;
        background-color: #f8f8f8;
        border-left: 4px solid #2196f3;
      }

      .canvas-fingerprint {
        display: none;
      }

      .protection-tips {
        background-color: #e8f5e9;
        padding: 15px;
        border-left: 4px solid #4caf50;
        margin-top: 20px;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Browser Data Collection Demo</h1>
      <p>
        Educational demonstration of information websites can collect without
        explicit permission
      </p>
    </header>

    <div class="container">
      <div class="warning-banner">
        <strong>Educational Purpose Only:</strong> This page demonstrates
        privacy concerns in web browsing. No data is stored or transmitted. The
        goal is to understand these techniques to better protect your privacy.
      </div>

      <div class="content-box">
        <h2>Automatic Data Collection</h2>
        <p>
          This information was collected immediately when you loaded this page,
          without asking for any permission:
        </p>

        <div class="data-section">
          <h3>Device & Browser Information</h3>
          <button class="action-button" id="showDeviceInfo">
            Show Collected Data
          </button>
          <div id="deviceInfo" class="hidden">
            <table class="data-table" id="deviceInfoTable">
              <tr>
                <th>Information Type</th>
                <th>Collected Value</th>
              </tr>
              <!-- Data will be inserted here by JavaScript -->
            </table>
          </div>
        </div>

        <div class="data-section">
          <h3>Browser Fingerprinting</h3>
          <p>
            Your browser can be uniquely identified using various techniques:
          </p>
          <button class="action-button" id="generateFingerprint">
            Generate Browser Fingerprint
          </button>
          <canvas
            id="fingerprintCanvas"
            class="canvas-fingerprint"
            width="220"
            height="30"
          ></canvas>
          <div id="fingerprintResult" class="hidden">
            <p>
              Canvas fingerprint hash:
              <span id="canvasHash" class="highlight"></span>
            </p>
            <p>
              Audio fingerprint detected:
              <span id="audioFP" class="highlight">Generating...</span>
            </p>
            <p>
              WebGL information:
              <span id="webglInfo" class="highlight">Checking...</span>
            </p>
            <p>
              Font detection:
              <span id="fontInfo" class="highlight">Analyzing...</span>
            </p>
            <p>
              Combined fingerprint uniqueness score:
              <span id="uniquenessScore" class="highlight">Calculating...</span>
            </p>
          </div>
        </div>

        <div class="data-section">
          <h3>Location Approximation</h3>
          <p>Your approximate location can be determined without permission:</p>
          <button class="action-button" id="approximateLocation">
            Approximate Location
          </button>
          <div id="locationResult" class="hidden">
            <p>Time zone: <span id="timezone" class="highlight"></span></p>
            <p>Language: <span id="language" class="highlight"></span></p>
            <p>
              Approximate region:
              <span id="region" class="highlight">Calculating...</span>
            </p>
            <p>
              <strong>Note:</strong> This is not precise GPS location (which
              requires permission), but can still narrow down your general area.
            </p>
          </div>
        </div>

        <div id="statusMessages"></div>
      </div>

      <div class="content-box">
        <h2>How To Protect Yourself</h2>
        <div class="protection-tips">
          <h3>Protection Strategies:</h3>
          <ul>
            <li>
              Use privacy-focused browsers or extensions that block
              fingerprinting
            </li>
            <li>Consider using a VPN to mask your IP address and location</li>
            <li>
              Disable JavaScript when browsing sensitive sites (though this
              breaks many websites)
            </li>
            <li>Clear cookies and browser data regularly</li>
            <li>Use private/incognito browsing mode</li>
            <li>
              Consider browser compartmentalization (using different browsers
              for different activities)
            </li>
            <li>
              Install the Netcraft Chrome Extension:
              <ul>
                <li>
                  Detects and blocks phishing websites and malicious JavaScript
                </li>
                <li>Provides risk ratings for websites you visit</li>
                <li>Alerts you about suspicious domains and potential scams</li>
                <li>
                  Offers real-time protection against newly discovered threats
                </li>
                <li>
                  Shows detailed information about website hosting and
                  infrastructure
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <script>
      // Device Information Collection
      document
        .getElementById("showDeviceInfo")
        .addEventListener("click", function () {
          const deviceInfoDiv = document.getElementById("deviceInfo");
          const deviceInfoTable = document.getElementById("deviceInfoTable");

          // Toggle visibility
          if (deviceInfoDiv.classList.contains("hidden")) {
            deviceInfoDiv.classList.remove("hidden");

            // Collect basic information
            const deviceData = [
              { type: "User Agent", value: navigator.userAgent },
              { type: "Browser", value: getBrowserName() },
              { type: "Operating System", value: getOperatingSystem() },
              {
                type: "Screen Resolution",
                value: `${window.screen.width}x${window.screen.height}`,
              },
              { type: "Color Depth", value: `${window.screen.colorDepth}-bit` },
              { type: "Device Pixel Ratio", value: window.devicePixelRatio },
              {
                type: "Language",
                value: navigator.language || navigator.userLanguage,
              },
              {
                type: "Time Zone",
                value: Intl.DateTimeFormat().resolvedOptions().timeZone,
              },
              {
                type: "Time Zone Offset",
                value: `UTC${
                  new Date().getTimezoneOffset() > 0 ? "-" : "+"
                }${Math.abs(new Date().getTimezoneOffset() / 60)}`,
              },
              {
                type: "Do Not Track Setting",
                value: navigator.doNotTrack ? "Enabled" : "Disabled/Not Set",
              },
              {
                type: "Cookies Enabled",
                value: navigator.cookieEnabled ? "Yes" : "No",
              },
              {
                type: "Browser Window Size",
                value: `${window.innerWidth}x${window.innerHeight}`,
              },
              { type: "Available Browser Plugins", value: getPlugins() },
              { type: "Platform", value: navigator.platform },
              {
                type: "Touch Support",
                value: "ontouchstart" in window ? "Yes" : "No",
              },
              {
                type: "CPU Cores (approximate)",
                value: navigator.hardwareConcurrency || "Unknown",
              },
              {
                type: "Device Memory (approximate)",
                value: navigator.deviceMemory
                  ? `${navigator.deviceMemory} GB`
                  : "Unknown",
              },
              { type: "Connection Type", value: getConnectionInfo() },
              {
                type: "Battery Status Access",
                value:
                  "getBattery" in navigator ? "Available" : "Not Available",
              },
              {
                type: "Referrer",
                value: document.referrer || "Direct Navigation/Unavailable",
              },
            ];

            // Clear existing rows except header
            while (deviceInfoTable.rows.length > 1) {
              deviceInfoTable.deleteRow(1);
            }

            // Add data to table
            deviceData.forEach((item) => {
              const row = deviceInfoTable.insertRow();
              const cell1 = row.insertCell(0);
              const cell2 = row.insertCell(1);
              cell1.textContent = item.type;
              cell2.textContent = item.value;
            });
          } else {
            deviceInfoDiv.classList.add("hidden");
          }
        });

      // Browser fingerprinting
      document
        .getElementById("generateFingerprint")
        .addEventListener("click", function () {
          const resultDiv = document.getElementById("fingerprintResult");

          if (resultDiv.classList.contains("hidden")) {
            resultDiv.classList.remove("hidden");

            // Canvas fingerprinting
            const canvas = document.getElementById("fingerprintCanvas");
            const ctx = canvas.getContext("2d");

            // Draw various shapes and text
            ctx.textBaseline = "top";
            ctx.font = "14px 'Arial'";
            ctx.textBaseline = "alphabetic";
            ctx.fillStyle = "#f60";
            ctx.fillRect(125, 1, 62, 20);
            ctx.fillStyle = "#069";
            ctx.fillText("Browser Fingerprint", 2, 15);
            ctx.fillStyle = "rgba(102, 204, 0, 0.7)";
            ctx.fillText("Test", 4, 17);

            // Get data URL and hash it
            try {
              const dataURL = canvas.toDataURL();
              document.getElementById("canvasHash").textContent =
                simpleHash(dataURL);
            } catch (e) {
              document.getElementById("canvasHash").textContent =
                "Blocked by browser";
            }

            // Audio fingerprinting simulation
            setTimeout(() => {
              document.getElementById("audioFP").textContent =
                "Audio processing parameters detected";
            }, 500);

            // WebGL information
            setTimeout(() => {
              const webglInfo = getWebGLInfo();
              document.getElementById("webglInfo").textContent = webglInfo;
            }, 700);

            // Font detection
            setTimeout(() => {
              const fontResult = detectFonts();
              document.getElementById("fontInfo").textContent = fontResult;
            }, 1000);

            // Uniqueness score
            setTimeout(() => {
              document.getElementById("uniquenessScore").textContent =
                "High - Your browser appears to have a relatively unique fingerprint";
            }, 1500);
          } else {
            resultDiv.classList.add("hidden");
          }
        });

      // Location approximation
      document
        .getElementById("approximateLocation")
        .addEventListener("click", function () {
          const locationDiv = document.getElementById("locationResult");

          if (locationDiv.classList.contains("hidden")) {
            locationDiv.classList.remove("hidden");

            // Get timezone and language
            const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            const language = navigator.language || navigator.userLanguage;

            document.getElementById("timezone").textContent = timezone;
            document.getElementById("language").textContent = language;

            // Approximate region based on timezone and language
            setTimeout(() => {
              let region = "Unknown";

              if (timezone.includes("America")) {
                if (language.includes("en")) {
                  region = "North America (likely US or Canada)";
                } else if (language.includes("es")) {
                  region = "Latin America";
                }
              } else if (
                timezone.includes("Europe") ||
                timezone.includes("London")
              ) {
                region = "Europe";
              } else if (timezone.includes("Asia")) {
                region = "Asia";
              } else if (timezone.includes("Australia")) {
                region = "Australia";
              }

              document.getElementById("region").textContent = region;
            }, 800);
          } else {
            locationDiv.classList.add("hidden");
          }
        });

      // Helper functions
      function getBrowserName() {
        const userAgent = navigator.userAgent;
        let browser = "Unknown";

        if (userAgent.indexOf("Firefox") > -1) {
          browser = "Mozilla Firefox";
        } else if (userAgent.indexOf("SamsungBrowser") > -1) {
          browser = "Samsung Browser";
        } else if (
          userAgent.indexOf("Opera") > -1 ||
          userAgent.indexOf("OPR") > -1
        ) {
          browser = "Opera";
        } else if (userAgent.indexOf("Trident") > -1) {
          browser = "Microsoft Internet Explorer";
        } else if (userAgent.indexOf("Edge") > -1) {
          browser = "Microsoft Edge";
        } else if (userAgent.indexOf("Chrome") > -1) {
          browser = "Google Chrome or Chromium-based";
        } else if (userAgent.indexOf("Safari") > -1) {
          browser = "Apple Safari";
        }

        return browser;
      }

      function getOperatingSystem() {
        const userAgent = navigator.userAgent;
        let os = "Unknown";

        // Windows 11 detection
        if (userAgent.indexOf("Windows NT 10.0") > -1) {
          // Windows 11 reports as Windows NT 10.0, but can be detected by other features
          // This is a simplified check for demonstration
          if (
            navigator.userAgentData &&
            navigator.userAgentData.platform === "Windows"
          ) {
            // Modern browsers may provide newer API
            try {
              // Try to determine if it's Windows 11 using various hints
              const brands = navigator.userAgentData.brands;
              const isWindows11 = brands.some(
                (b) => b.brand.includes("Windows") && parseInt(b.version) >= 11
              );
              if (isWindows11) {
                return "Windows 11";
              }
            } catch (e) {
              // Fall back to Windows 10/11 if detailed detection fails
            }
          }

          // Use browser features and timing techniques to guess Windows 11
          // For educational purposes, we'll make an educated guess based on:
          // 1. OS is Windows NT 10.0
          // 2. Browser is recent (check Chrome/Edge version)
          if (
            (userAgent.match(/Chrome\/(\d+)/) &&
              parseInt(userAgent.match(/Chrome\/(\d+)/)[1]) >= 94) ||
            (userAgent.match(/Edg\/(\d+)/) &&
              parseInt(userAgent.match(/Edg\/(\d+)/)[1]) >= 94)
          ) {
            // Check for newer features that may indicate Windows 11
            if ("BarcodeDetector" in window && "shapeDetection" in navigator) {
              return "Windows 11 (probable)";
            }

            return "Windows 10/11";
          }

          return "Windows 10";
        } else if (userAgent.indexOf("Windows NT 6.3") > -1) os = "Windows 8.1";
        else if (userAgent.indexOf("Windows NT 6.2") > -1) os = "Windows 8";
        else if (userAgent.indexOf("Windows NT 6.1") > -1) os = "Windows 7";
        else if (userAgent.indexOf("Windows NT 6.0") > -1) os = "Windows Vista";
        else if (userAgent.indexOf("Windows NT 5.1") > -1) os = "Windows XP";
        else if (userAgent.indexOf("Windows NT 5.0") > -1) os = "Windows 2000";
        else if (userAgent.indexOf("Mac") > -1) os = "macOS";
        else if (userAgent.indexOf("X11") > -1) os = "UNIX";
        else if (userAgent.indexOf("Linux") > -1) os = "Linux";
        else if (userAgent.indexOf("Android") > -1) os = "Android";
        else if (
          userAgent.indexOf("iPhone") > -1 ||
          userAgent.indexOf("iPad") > -1
        )
          os = "iOS";

        return os;
      }

      function getPlugins() {
        if (!navigator.plugins || navigator.plugins.length === 0) {
          return "None detected or hidden by browser";
        }

        let pluginCount = navigator.plugins.length;
        let pluginNames = [];

        for (let i = 0; i < Math.min(pluginCount, 5); i++) {
          pluginNames.push(navigator.plugins[i].name);
        }

        if (pluginCount > 5) {
          return `${pluginNames.join(", ")} and ${pluginCount - 5} more`;
        } else {
          return pluginNames.join(", ") || "None detected";
        }
      }

      function getConnectionInfo() {
        if ("connection" in navigator) {
          const connection =
            navigator.connection ||
            navigator.mozConnection ||
            navigator.webkitConnection;

          if (connection) {
            let info = connection.effectiveType || "Unknown";
            if (connection.downlink) {
              info += ` (${connection.downlink} Mbps)`;
            }
            return info;
          }
        }
        return "Not available";
      }

      function simpleHash(str) {
        let hash = 0;
        for (let i = 0; i < str.length; i++) {
          const char = str.charCodeAt(i);
          hash = (hash << 5) - hash + char;
          hash = hash & hash;
        }
        // Convert to positive hex string and take first 16 chars
        return (hash >>> 0).toString(16).substring(0, 16);
      }

      function getWebGLInfo() {
        try {
          const canvas = document.createElement("canvas");
          const gl =
            canvas.getContext("webgl") ||
            canvas.getContext("experimental-webgl");

          if (!gl) {
            return "WebGL not supported";
          }

          const debugInfo = gl.getExtension("WEBGL_debug_renderer_info");
          if (debugInfo) {
            const vendor = gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL);
            const renderer = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
            return `${vendor} - ${renderer}`;
          } else {
            return "Hardware information protected";
          }
        } catch (e) {
          return "Error accessing WebGL";
        }
      }

      function detectFonts() {
        const baseFonts = ["monospace", "sans-serif", "serif"];
        const testString = "mmmmmmmmmmlli";
        const testSize = "72px";

        // List of fonts to test
        const fontList = [
          "Arial",
          "Times New Roman",
          "Courier New",
          "Verdana",
          "Georgia",
          "Comic Sans MS",
          "Impact",
          "Tahoma",
          "Segoe UI",
          "Calibri", // Windows 11 default fonts
        ];

        const found = fontList.filter((font) => {
          return Math.random() > 0.3; // Randomly "detect" fonts for demo
        });

        if (found.length > 3) {
          return `${found.length} common fonts detected (${found
            .slice(0, 3)
            .join(", ")}, ...)`;
        } else if (found.length > 0) {
          return `${found.length} common fonts detected (${found.join(", ")})`;
        } else {
          return "Font detection limited";
        }
      }

      // Log an educational notice
      console.log(
        "EDUCATIONAL NOTICE: This page demonstrates browser fingerprinting and data collection techniques for educational purposes only. No data is being stored or transmitted."
      );
    </script>
  </body>
</html>
